<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ูุธุงู ุชุชุจุน ูุฅุฏุงุฑุฉ ุงููุดููุงุช</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- Sidebar -->
<div id="sidebar-overlay" class="sidebar-overlay"></div>
<div id="sidebar" class="sidebar">
    <div class="sidebar-header">
        <h3>ุงููุงุฆูุฉ</h3>
        <button id="close-sidebar" class="close-sidebar-btn">&times;</button>
    </div>
    <div class="sidebar-content">
        <button id="open-modal-btn" class="sidebar-btn">
            <span class="btn-icon">โ</span>
            ุฅุถุงูุฉ ูุดููุฉ ุฌุฏูุฏุฉ
        </button>
        <button id="export-csv-btn" class="sidebar-btn">
            <span class="btn-icon">๐</span>
            ุชุตุฏูุฑ ุชูุฑูุฑ ุงููุดููุงุช
        </button>
        <button id="import-excel-btn" class="sidebar-btn">
            <span class="btn-icon">๐ฅ</span>
            ุงุณุชูุฑุงุฏ ุงููุดููุงุช
        </button>
        <button id="export-sqlite-btn" class="sidebar-btn">
            <span class="btn-icon">๐พ</span>
            ูุณุฎุฉ ุงุญุชูุงุทูุฉ
        </button>
        <input type="file" id="import-excel-input" accept=".xlsx,.xls,.csv" style="display:none" />
    </div>
</div>

<!-- Toggle Sidebar Button -->
<button id="toggle-sidebar" class="toggle-sidebar-btn">โฐ</button>

<!-- Notifications Button -->
<div class="notifications-wrapper">
    <button id="notifications-btn" class="notifications-btn">
        <span class="notifications-icon">๐</span>
        <span id="notifications-count" class="notifications-count"></span>
    </button>
    <div id="notifications-panel" class="notifications-panel">
        <div class="notifications-header">
            <h3>ุงูุฅุดุนุงุฑุงุช</h3>
            <button id="close-notifications" class="close-notifications-btn">&times;</button>
        </div>
        <div id="notifications-list" class="notifications-list">
            <!-- Notifications will be inserted here -->
        </div>
    </div>
</div>

<div class="container">
    <h1>ูุธุงู ุชุชุจุน ุงููุดููุงุช</h1>

    <!-- ุงูุนุฏุงุฏุงุช -->
    <div class="counters">
        <div class="counter-box">
            <h3>ุฅุฌูุงูู ุงููุดููุงุช</h3>
            <p id="total-count">0</p>
        </div>
        <div class="counter-box">
            <h3>ุฌุฏูุฏ</h3>
            <p id="new-count">0</p>
        </div>
        <div class="counter-box">
            <h3>ุฌุงุฑู ุญู ุงููุดููุฉ</h3>
            <p id="in-progress-count">0</p>
        </div>
        <div class="counter-box">
            <h3>ููุชููุฉ</h3>
            <p id="completed-count">0</p>
        </div>
    </div>

    <hr>

    <!-- ุฌุฏูู ุงููุดููุงุช -->
    <h2>ูุงุฆูุฉ ุงููุดููุงุช</h2>
    <table id="problems-table">
        <thead>
            <tr>
                <th>ุฑูู ุงููุดููุฉ</th>
                <th>ุงูุฌูุฉ</th>
                <th>ุงููุดููุฉ</th>
                <th>ุชุงุฑูุฎ ุงูุฅุถุงูุฉ</th>
                <th>ุชุงุฑูุฎ ุงูุฅููุงู</th>
                <th>ุฃูุงู ุงูุญู</th>
                <th>ุงููุณุชููุฏ</th>
                <th>ุงููุงุชู</th>
                <th>ุงูุญุงูุฉ</th>
                <th>ุฅุฌุฑุงุก</th>
                <th>ุญุฐู</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <!-- Pagination -->
    <div class="pagination-controls">
        <button id="prev-page-btn" disabled>ุงูุณุงุจู</button>
        <span id="page-info">ุงูุตูุญุฉ 1 ูู 1</span>
        <button id="next-page-btn" disabled>ุงูุชุงูู</button>
    </div>
</div>

<!-- Modal ุฅุถุงูุฉ/ุชุนุฏูู ูุดููุฉ -->
<div id="problem-modal" class="modal">
    <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h2>ุฅุถุงูุฉ ูุดููุฉ ุฌุฏูุฏุฉ</h2>
        <form id="problem-form">
            <div id="problem-number-container" style="display:none">
                <label for="problem-number">ุฑูู ุงููุดููุฉ:</label>
                <input type="text" id="problem-number" placeholder="ูุซุงู: P-0001" readonly>
            </div>

            <label for="entity-name">ุงุณู ุงูุฌูุฉ:</label>
            <input type="text" id="entity-name" required>

            <label for="problem-description">ุงููุดููุฉ (ุงููุตู):</label>
            <input type="text" id="problem-description" required>

            <label for="reporter-name">ุงุณู ุงููุณุชููุฏ:</label>
            <input type="text" id="reporter-name" required>

            <label for="reporter-phone">ุฑูู ุงููุงุชู:</label>
            <input type="text" id="reporter-phone" required>

            <label for="problem-status">ุญุงูุฉ ุงููุดููุฉ:</label>
            <select id="problem-status" required>
                <option value="ุฌุฏูุฏ">ุฌุฏูุฏ</option>
                <option value="ุฌุงุฑู ุญู ุงููุดููุฉ">ุฌุงุฑู ุญู ุงููุดููุฉ</option>
                <option value="ููุชููุฉ">ููุชููุฉ</option>
            </select>

            <button type="submit">ุฅุถุงูุฉ ูุญูุธ ุงููุดููุฉ</button>
            <button type="button" id="close-form-btn" class="close-btn-form">ุฅูุบุงุก</button>
        </form>
    </div>
</div>

<!-- Toast Notifications -->
<div id="toast-container"></div>

<!-- ูุงูุฐุฉ ุชุฃููุฏ ุฅุดุนุงุฑ -->
<div id="notify-popup" class="popup-overlay">
  <div class="popup-box">
    <h3 id="notify-text">ูู ุชุฑูุฏ ุฅุดุนุงุฑ ุงููุณุชููุฏ ุจุฃูู ุชู ุญู ุงููุดููุฉุ</h3>
    <div class="popup-actions">
      <button id="confirm-yes" class="btn btn-yes">ูุนูุ ุฃุฑุณู ุฅุดุนุงุฑ</button>
      <button id="confirm-no" class="btn btn-no">ูุงุ ููุท ุฃููู ุงูุญุงูุฉ</button>
    </div>
  </div>
</div>

<!-- ูุงูุฐุฉ ุชุฃููุฏ ุงูุญุฐู -->
<div id="delete-popup" class="popup-overlay">
  <div class="popup-box">
    <h3>ุชุฃููุฏ ุงูุญุฐู</h3>
    <p class="delete-message">ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐู ุงููุดููุฉุ</p>
    <div class="popup-actions">
      <button id="delete-confirm" class="btn btn-yes">ูุนูุ ุงุญุฐู</button>
      <button id="delete-cancel" class="btn btn-no">ุฅูุบุงุก</button>
    </div>
  </div>
</div>

<!-- SheetJS (XLSX) for import/export of Excel files -->
<script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
<script src="./sqljs/sql-wasm.js"></script>
<script src="script.js"></script>
</body>
</html>
